# æ™ºèƒ½å®¢ç¾¤åˆ†æåŠ©æ‰‹ - å‰ç«¯å¼€å‘æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æ™ºèƒ½å®¢ç¾¤åˆ†æåŠ©æ‰‹æ˜¯ä¸€ä¸ªåŸºäº React + TypeScript çš„å®¢æˆ·å…³ç³»ç®¡ç†å’Œå®¢ç¾¤åˆ†æç³»ç»Ÿï¼Œå¸®åŠ©é“¶è¡Œå®¢æˆ·ç»ç†å¿«é€Ÿäº†è§£å®¢æˆ·ä¿¡æ¯ã€åˆ†æå®¢ç¾¤ç‰¹å¾ã€å¯¹æ¯”ä¸åŒå®¢ç¾¤å·®å¼‚ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
customer/
â”œâ”€â”€ App.tsx                          # ä¸»åº”ç”¨ç»„ä»¶
â”œâ”€â”€ types.ts                         # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ api.ts                           # API æœåŠ¡å±‚
â”œâ”€â”€ index.css                        # å…¨å±€æ ·å¼
â”œâ”€â”€ components/                      # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ LeftPanel.tsx               # å·¦ä¾§å¯¼èˆªé¢æ¿
â”‚   â”œâ”€â”€ RightPanel.tsx              # å³ä¾§è¯¦æƒ…é¢æ¿
â”‚   â”œâ”€â”€ CustomerCard.tsx            # å®¢æˆ·å¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ SegmentAnalysis.tsx         # å®¢ç¾¤åˆ†æç»„ä»¶
â”‚   â”œâ”€â”€ SegmentAnalysisDetail.tsx   # å®¢ç¾¤åˆ†æè¯¦æƒ…ç»„ä»¶
â”‚   â”œâ”€â”€ BriefSegmentComparison.tsx  # ç®€è¦å®¢ç¾¤å¯¹æ¯”ç»„ä»¶
â”‚   â”œâ”€â”€ SegmentComparisonDetail.tsx # å®¢ç¾¤å¯¹æ¯”è¯¦æƒ…ç»„ä»¶
â”‚   â””â”€â”€ InlineFilter.tsx            # å†…è”ç­›é€‰å™¨ç»„ä»¶
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ hooks/                      # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ useMessageHandler.ts    # æ¶ˆæ¯å¤„ç† Hook
â”‚   â”‚   â”œâ”€â”€ useSegmentManagement.ts # å®¢ç¾¤ç®¡ç† Hook
â”‚   â”‚   â”œâ”€â”€ useRightPanel.ts        # å³ä¾§é¢æ¿ Hook
â”‚   â”‚   â””â”€â”€ useRightPanelDrag.ts    # å³ä¾§é¢æ¿æ‹–æ‹½ Hook
â”‚   â””â”€â”€ constants.ts                # å¸¸é‡å®šä¹‰
â””â”€â”€ package.json                    # é¡¹ç›®ä¾èµ–é…ç½®
```

## ğŸ¨ ä¸­é—´å¯¹è¯å¡ç‰‡ç±»å‹

ä¸­é—´å¯¹è¯åŒºåŸŸæ˜¾ç¤ºç”¨æˆ·ä¸ AI åŠ©æ‰‹çš„äº¤äº’å†…å®¹ï¼Œæ”¯æŒå¤šç§ç±»å‹çš„æ¶ˆæ¯å¡ç‰‡ï¼š

### 1. æ–‡æœ¬æ¶ˆæ¯
- **ç±»å‹**: `MessageType.USER` | `MessageType.ASSISTANT`
- **å­—æ®µ**: `content: string`
- **ç”¨é€”**: æ˜¾ç¤ºçº¯æ–‡æœ¬å¯¹è¯å†…å®¹

### 2. å®¢æˆ·å¡ç‰‡
- **ç±»å‹**: `middle_panel.message_type = 'customer_cards'`
- **æ•°æ®ç»“æ„**:
```typescript
{
  message_type: 'customer_cards',
  cards: Array<{
    customer_id: string;           // å®¢æˆ·ID
    display_name: string;          // å®¢æˆ·æ˜¾ç¤ºåç§°
    tags: string[];                // å®¢æˆ·æ ‡ç­¾
    key_metrics: Record<string, string>;  // å…³é”®æŒ‡æ ‡
    ai_summary: string;            // AI æ‘˜è¦
    cof_expansion: { steps: string[] };  // æ¨ç†æ­¥éª¤
  }>
}
```
- **åŠŸèƒ½**: å±•ç¤ºå®¢æˆ·åŸºæœ¬ä¿¡æ¯ã€å…³é”®æŒ‡æ ‡ã€AI æ´å¯Ÿå’Œæ¨ç†è¿‡ç¨‹
- **äº¤äº’**: ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®å¯æ‰“å¼€å³ä¾§å®¢æˆ·è¯¦æƒ…é¢æ¿

### 3. å®¢ç¾¤æŸ¥è¯¢ç»“æœ
- **ç±»å‹**: `middle_panel.message_type = 'segment_result'`
- **æ•°æ®ç»“æ„**:
```typescript
{
  message_type: 'segment_result',
  summary: {
    total_count: number;          // å®¢æˆ·æ€»æ•°
    insights: string[];           // æ´å¯Ÿåˆ—è¡¨
  },
  customer_list: Array<{
    name: string;                 // å®¢æˆ·åç§°
    region: string;               // åœ°åŒº
    credit_util: string;          // æˆä¿¡ä½¿ç”¨ç‡
  }>,
  data_provenance?: string;       // æ•°æ®æ¥æº
}
```
- **åŠŸèƒ½**: å±•ç¤ºå®¢ç¾¤æŸ¥è¯¢ç»“æœï¼ŒåŒ…æ‹¬å®¢æˆ·åˆ—è¡¨ã€ç»Ÿè®¡æ‘˜è¦å’Œ AI æ´å¯Ÿ
- **äº¤äº’**: 
  - ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æ‰“å¼€å®¢ç¾¤åˆ†æè¯¦æƒ…
  - ç‚¹å‡»"ä¿å­˜ä¸ºå®¢ç¾¤"å¼¹å‡ºä¿å­˜å¯¹è¯æ¡†

### 4. å®¢ç¾¤å¯¹æ¯”ç»“æœ
- **ç±»å‹**: `middle_panel.message_type = 'segment_comparison'`
- **æ•°æ®ç»“æ„**:
```typescript
{
  message_type: 'segment_comparison',
  groups: Array<{
    name: string;                // å®¢ç¾¤åç§°
    count: number;               // å®¢æˆ·æ•°é‡
    dsl?: string;               // æŸ¥è¯¢DSL
  }>,
  comparison_summary: string[]; // å¯¹æ¯”æ‘˜è¦
  comparison_table: Array<{
    dimension: string;          // ç»´åº¦åç§°
    group_a: string;            // Aç»„å€¼
    group_b: string;            // Bç»„å€¼
    significant: boolean;      // æ˜¯å¦æ˜¾è‘—å·®å¼‚
    insight?: string;           // æ´å¯Ÿè¯´æ˜
  }>,
  data_provenance?: string;     // æ•°æ®æ¥æº
}
```
- **åŠŸèƒ½**: å±•ç¤ºå¤šä¸ªå®¢ç¾¤çš„å¯¹æ¯”åˆ†æç»“æœ
- **äº¤äº’**: ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æ‰“å¼€å®¢ç¾¤å¯¹æ¯”è¯¦æƒ…é¢æ¿

### 5. ç³»ç»Ÿæ¶ˆæ¯
- **ç±»å‹**: `middle_panel.message_type = 'system'`
- **å­—æ®µ**: `text?: string`
- **ç”¨é€”**: æ˜¾ç¤ºç³»ç»Ÿæç¤ºã€è­¦å‘Šç­‰ä¿¡æ¯

### 6. æ¾„æ¸…æ¶ˆæ¯
- **ç±»å‹**: `middle_panel.message_type = 'clarification'`
- **å­—æ®µ**: `options?: string[]`
- **ç”¨é€”**: å½“æŸ¥è¯¢æ¨¡ç³Šæ—¶ï¼Œæä¾›é€‰é¡¹è®©ç”¨æˆ·é€‰æ‹©

## ğŸ“Š å³ä¾§è¯¦æƒ…é¢æ¿ç±»å‹

å³ä¾§è¯¦æƒ…é¢æ¿æ”¯æŒä¸‰ç§ç±»å‹çš„è§†å›¾ï¼Œé€šè¿‡ `RightPanelType` æšä¸¾æ§åˆ¶ï¼š

### 1. å®¢æˆ·è¯¦æƒ…è§†å›¾
- **ç±»å‹**: `RightPanelType.CUSTOMER_DETAIL`
- **æ•°æ®ç±»å‹**: `CustomerProfile`
- **åŠŸèƒ½æ¨¡å—**:
  - **åŸºç¡€ç”»åƒ**: å®¢æˆ·åç§°ã€ç±»å‹ã€è¡Œä¸šã€è§„æ¨¡ã€åœ°åŒºã€å…³ç³»è¯„çº§ç­‰
  - **è´¢åŠ¡æŒ‡æ ‡**: è¥æ”¶ã€åˆ©æ¶¦ã€ç°é‡‘æµã€èµ„äº§è´Ÿå€ºç­‰è´¢åŠ¡æ•°æ®
  - **é£é™©äº‹ä»¶**: é£é™©ç±»å‹ã€çº§åˆ«ã€äº‹ä»¶è¯¦æƒ…ã€AI è¯„è®º
  - **å…³ç³»å›¾è°±**: å…³ç³»è¾¹æ•°ã€æ‹…ä¿é“¾ã€é£é™©ä¼ æ’­ç­‰
  - **äº§å“ä½¿ç”¨**: äº§å“æ•°é‡ã€è¦†ç›–ç‡ã€ç©ºç™½äº§å“
  - **äº’åŠ¨è®°å½•**: äº’åŠ¨æ¬¡æ•°ã€è¯é¢˜ã€æ‘˜è¦

**å…³é”®æ•°æ®ç»“æ„**:
```typescript
interface CustomerProfile {
  customer_id: string;
  customer_name: string;
  customer_type: string;
  industry: { code: string; name: string };
  scale: { employees_range: string; revenue_range: string };
  region: string;
  lifecycle_stage: string;
  relationship_rating: string;
  core_tags: string[];
  
  financial_metrics: {
    metrics: { revenue: number; gross_profit: number; ... };
    trend: { revenue_yoy: number; net_profit_yoy: number; ... };
    ratios: { gross_margin: number; net_margin: number; ... };
    bank_metrics: { credit_limit: number; credit_utilization: number; ... };
  };
  
  relationship_graph: {
    edge_count: number;
    has_guarantee_chain: boolean;
    risk_propagation_flag: boolean;
    edges: RelationshipEdge[];
  };
  
  product_usage: {
    product_count: number;
    coverage_score: number;
    products: Product[];
  };
  
  risk_events: {
    event_count: number;
    max_risk_level: string;
    events: RiskEvent[];
  };
  
  interactions: {
    interaction_count: number;
    interactions: Interaction[];
  };
}
```

### 2. å®¢ç¾¤åˆ†æè¯¦æƒ…è§†å›¾
- **ç±»å‹**: `RightPanelType.SEGMENT_ANALYSIS`
- **æ•°æ®ç±»å‹**: `SegmentAnalysisDetail`
- **åŠŸèƒ½æ¨¡å—**:
  - **å®¢ç¾¤æ‘˜è¦**: å®¢æˆ·æ€»æ•°ã€å¹³å‡å…³ç³»è¯„çº§ã€ç°é‡‘æµæƒ…å†µã€é£é™©åˆ†å¸ƒ
  - **å®¢æˆ·ç”»åƒ**: å®¢æˆ·ç±»å‹ã€è¡Œä¸šã€è§„æ¨¡ã€åœ°åŒºã€ç”Ÿå‘½å‘¨æœŸã€å…³ç³»è¯„çº§åˆ†å¸ƒ
  - **è´¢åŠ¡æŒ‡æ ‡**: å¹³å‡è¥æ”¶ã€åˆ©æ¶¦ã€ç°é‡‘æµã€èµ„äº§è´Ÿå€ºç­‰
  - **å…³ç³»å›¾è°±**: å¹³å‡å…³ç³»è¾¹æ•°ã€æ‹…ä¿é“¾æ¯”ä¾‹ã€é£é™©ä¼ æ’­æ¯”ä¾‹
  - **äº§å“ä½¿ç”¨**: å¹³å‡äº§å“æ•°ã€è¦†ç›–ç‡ã€ç©ºç™½äº§å“
  - **é£é™©äº‹ä»¶**: å¹³å‡äº‹ä»¶æ•°ã€é£é™©ç±»å‹åˆ†å¸ƒ
  - **äº’åŠ¨è®°å½•**: å¹³å‡äº’åŠ¨æ¬¡æ•°ã€è¯é¢˜åˆ†å¸ƒ
  - **Top å®¢æˆ·**: å®¢æˆ·åˆ—è¡¨åŠè¯¦ç»†ä¿¡æ¯

**å…³é”®æ•°æ®ç»“æ„**:
```typescript
interface SegmentAnalysisDetail {
  segment_id: string;
  segment_name: string;
  segment_dsl: string;
  customer_count: number;
  
  summary: {
    total_count: number;
    avg_relationship_rating: string;
    negative_cashflow_count: number;
    high_risk_count: number;
  };
  
  customer_profile: {
    customer_types: Array<{ name: string; count: number }>;
    industries: Array<{ name: string; count: number }>;
    // ... å…¶ä»–ç»´åº¦
  };
  
  financial_metrics: {
    avg_revenue: number;
    avg_gross_profit: number;
    // ... å…¶ä»–è´¢åŠ¡æŒ‡æ ‡
  };
  
  top_customers: Customer[];
  insights: string[];
  data_provenance: string;
}
```

### 3. å®¢ç¾¤å¯¹æ¯”è¯¦æƒ…è§†å›¾
- **ç±»å‹**: `RightPanelType.SEGMENT_COMPARISON`
- **æ•°æ®ç±»å‹**: `SegmentComparisonDetail`
- **åŠŸèƒ½æ¨¡å—**:
  - **å®¢æˆ·ç”»åƒå¯¹æ¯”**: å®¢æˆ·ç±»å‹ã€è¡Œä¸šã€è§„æ¨¡ã€åœ°åŒºç­‰ç»´åº¦å¯¹æ¯”
  - **è´¢åŠ¡æŒ‡æ ‡å¯¹æ¯”**: è¥æ”¶ã€åˆ©æ¶¦ã€ç°é‡‘æµç­‰è´¢åŠ¡æ•°æ®å¯¹æ¯”
  - **å…³ç³»å¯¹æ¯”**: å…³ç³»å›¾è°±æŒ‡æ ‡å¯¹æ¯”
  - **äº§å“ä½¿ç”¨å¯¹æ¯”**: äº§å“æ•°é‡ã€è¦†ç›–ç‡å¯¹æ¯”
  - **é£é™©å¯¹æ¯”**: é£é™©äº‹ä»¶å¯¹æ¯”
  - **äº’åŠ¨å¯¹æ¯”**: äº’åŠ¨è®°å½•å¯¹æ¯”
  - **æ˜¾è‘—å·®å¼‚**: é«˜äº®æ˜¾ç¤ºä¸¤ç»„å®¢ç¾¤é—´çš„æ˜¾è‘—å·®å¼‚

**å…³é”®æ•°æ®ç»“æ„**:
```typescript
interface SegmentComparisonDetail {
  comparison_id: string;
  groups: Array<{
    id: string;
    name: string;
    dsl: string;
    customer_count: number;
  }>;
  
  customer_profile_comparison: {
    customer_types: Array<{
      name: string;
      group_a_count: number;
      group_b_count: number;
      group_a_ratio: string;
      group_b_ratio: string;
      significant: boolean;
    }>;
    // ... å…¶ä»–ç»´åº¦
  };
  
  financial_metrics_comparison: {
    group_a: { avg_revenue: number; ... };
    group_b: { avg_revenue: number; ... };
    significant_metrics: Array<{
      metric: string;
      group_a_value: string;
      group_b_value: string;
      difference: string;
      insight: string;
    }>;
  };
  
  // ... å…¶ä»–å¯¹æ¯”ç»´åº¦
  data_provenance: string;
}
```

## ğŸ¯ ä¸»è¦ç»„ä»¶è¯´æ˜

### LeftPanelï¼ˆå·¦ä¾§å¯¼èˆªé¢æ¿ï¼‰
- **åŠŸèƒ½**: å±•ç¤º"æˆ‘çš„å®¢ç¾¤"å’Œ"å†å²å¯¹è¯"
- **ä¸»è¦æ“ä½œ**:
  - é€‰æ‹©å®¢ç¾¤æŸ¥çœ‹è¯¦æƒ…
  - å¤šé€‰å®¢ç¾¤è¿›è¡Œå¯¹æ¯”ï¼ˆæœ€å¤š3ä¸ªï¼‰
  - åˆ·æ–°å®¢ç¾¤æ•°æ®
  - åˆ é™¤å®¢ç¾¤
  - æŸ¥çœ‹å†å²å¯¹è¯
  - åˆ é™¤å†å²è®°å½•

### RightPanelï¼ˆå³ä¾§è¯¦æƒ…é¢æ¿ï¼‰
- **åŠŸèƒ½**: å±•ç¤ºå®¢æˆ·è¯¦æƒ…ã€å®¢ç¾¤åˆ†æã€å®¢ç¾¤å¯¹æ¯”çš„è¯¦ç»†ä¿¡æ¯
- **ç‰¹æ€§**:
  - æ”¯æŒæŠ˜å /å±•å¼€å„ä¸ªæ¨¡å—
  - æ”¯æŒæ‹–æ‹½è°ƒæ•´å®½åº¦
  - å“åº”å¼å¸ƒå±€

### CustomerCardï¼ˆå®¢æˆ·å¡ç‰‡ï¼‰
- **åŠŸèƒ½**: åœ¨å¯¹è¯ä¸­å±•ç¤ºå®¢æˆ·ä¿¡æ¯
- **å†…å®¹**: å®¢æˆ·æ‘˜è¦ã€å…³é”®æŒ‡æ ‡ã€AI æ´å¯Ÿã€æ¨ç†æ­¥éª¤

### SegmentAnalysisï¼ˆå®¢ç¾¤åˆ†æï¼‰
- **åŠŸèƒ½**: å±•ç¤ºå®¢ç¾¤åˆ†æç»“æœ
- **å†…å®¹**: å®¢æˆ·åˆ—è¡¨ã€ç»Ÿè®¡æ‘˜è¦ã€AI æ´å¯Ÿ

### BriefSegmentComparisonï¼ˆç®€è¦å®¢ç¾¤å¯¹æ¯”ï¼‰
- **åŠŸèƒ½**: åœ¨å¯¹è¯ä¸­å±•ç¤ºå®¢ç¾¤å¯¹æ¯”ç»“æœ
- **å†…å®¹**: å¯¹æ¯”æ‘˜è¦ã€å¯¹æ¯”è¡¨æ ¼ã€æ•°æ®æ¥æº

### InlineFilterï¼ˆå†…è”ç­›é€‰å™¨ï¼‰
- **åŠŸèƒ½**: å½“æŸ¥è¯¢æ¨¡ç³Šæ—¶ï¼Œæä¾›ç­›é€‰æ¡ä»¶è¾“å…¥
- **äº¤äº’**: æ”¯æŒæ·»åŠ å¤šä¸ªç­›é€‰æ¡ä»¶

## ğŸ”§ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **React**: 19.2.3 - UI æ¡†æ¶
- **TypeScript**: 5.8.2 - ç±»å‹ç³»ç»Ÿ
- **Vite**: 6.2.0 - æ„å»ºå·¥å…·

### UI ç»„ä»¶åº“
- **Lucide React**: 0.562.0 - å›¾æ ‡åº“
- **Recharts**: 3.6.0 - å›¾è¡¨åº“

### AI é›†æˆ
- **@google/genai**: 1.34.0 - Google AI SDK

## ğŸš€ å¼€å‘æŒ‡å—

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

### é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
```bash
npm run preview
```

## ğŸ“ è‡ªå®šä¹‰ Hooks

### useMessageHandler
- **åŠŸèƒ½**: ç®¡ç†èŠå¤©æ¶ˆæ¯çš„å‘é€ã€æ¥æ”¶ã€æ˜¾ç¤º
- **è¿”å›å€¼**:
  - `messages`: æ¶ˆæ¯åˆ—è¡¨
  - `setMessages`: æ›´æ–°æ¶ˆæ¯åˆ—è¡¨
  - `inputValue`: è¾“å…¥æ¡†å€¼
  - `setInputValue`: æ›´æ–°è¾“å…¥æ¡†å€¼
  - `isTyping`: æ˜¯å¦æ­£åœ¨è¾“å…¥
  - `showInlineFilter`: æ˜¯å¦æ˜¾ç¤ºå†…è”ç­›é€‰å™¨
  - `handleSend`: å‘é€æ¶ˆæ¯
  - `handleRefreshSegment`: åˆ·æ–°å®¢ç¾¤
  - `handleDeleteHistory`: åˆ é™¤å†å²è®°å½•

### useSegmentManagement
- **åŠŸèƒ½**: ç®¡ç†å®¢ç¾¤çš„å¯¹æ¯”ã€åˆ é™¤ã€é€‰æ‹©å’Œä¿å­˜
- **è¿”å›å€¼**:
  - `savedSegments`: ä¿å­˜çš„å®¢ç¾¤åˆ—è¡¨
  - `setSavedSegments`: æ›´æ–°å®¢ç¾¤åˆ—è¡¨
  - `showSaveSegmentModal`: æ˜¯å¦æ˜¾ç¤ºä¿å­˜å®¢ç¾¤æ¨¡æ€æ¡†
  - `handleCompareSegments`: å¯¹æ¯”å®¢ç¾¤
  - `handleDeleteSegment`: åˆ é™¤å®¢ç¾¤
  - `handleSelectSegment`: é€‰æ‹©å®¢ç¾¤
  - `handleSaveSegment`: ä¿å­˜å®¢ç¾¤

### useRightPanel
- **åŠŸèƒ½**: ç®¡ç†å³ä¾§é¢æ¿çš„å†…å®¹å’ŒçŠ¶æ€
- **è¿”å›å€¼**:
  - `selectedProfile`: é€‰ä¸­çš„å®¢æˆ·/å®¢ç¾¤æ•°æ®
  - `rightPanelType`: å³ä¾§é¢æ¿ç±»å‹
  - `setSelectedProfile`: è®¾ç½®é€‰ä¸­æ•°æ®
  - `setRightPanelType`: è®¾ç½®é¢æ¿ç±»å‹
  - `handleCustomerClick`: å¤„ç†å®¢æˆ·ç‚¹å‡»
  - `handleShowCustomerDetail`: æ˜¾ç¤ºå®¢æˆ·è¯¦æƒ…
  - `handleShowSegmentAnalysis`: æ˜¾ç¤ºå®¢ç¾¤åˆ†æ
  - `handleShowSegmentComparisonDetail`: æ˜¾ç¤ºå®¢ç¾¤å¯¹æ¯”è¯¦æƒ…

### useRightPanelDrag
- **åŠŸèƒ½**: ç®¡ç†å³ä¾§é¢æ¿çš„æ‹–æ‹½è°ƒæ•´
- **è¿”å›å€¼**:
  - `rightPanelWidth`: å³ä¾§é¢æ¿å®½åº¦
  - `handleMouseDown`: å¤„ç†é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶

## ğŸ¨ æ ·å¼è§„èŒƒ

### é¢œè‰²ç³»ç»Ÿ
- **ä¸»è‰²**: `blue-600` (#2563eb)
- **èƒŒæ™¯**: `slate-50` (#f8fafc)
- **æ–‡å­—**: `slate-800` (#1e293b)
- **è¾¹æ¡†**: `slate-200` (#e2e8f0)

### å­—ä½“å¤§å°
- **æ ‡é¢˜**: `text-lg` (1.125rem)
- **æ­£æ–‡**: `text-sm` (0.875rem)
- **å°å­—**: `text-xs` (0.75rem)
- **è¶…å°**: `text-[10px]` (0.625rem)

### é—´è·
- **ç»„ä»¶é—´è·**: `space-y-6` (1.5rem)
- **å†…è¾¹è·**: `p-4` (1rem)
- **å¤–è¾¹è·**: `m-4` (1rem)

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹æ¶ˆæ¯æ•°æ®
åœ¨ `App.tsx` ä¸­æ·»åŠ  console.log æŸ¥çœ‹æ¶ˆæ¯ç»“æ„ï¼š
```typescript
{messages.map((msg) => {
  console.log('Message:', msg);
  return <div key={msg.id}>...</div>;
})}
```

### 2. æŸ¥çœ‹å³ä¾§é¢æ¿æ•°æ®
åœ¨ `RightPanel.tsx` ä¸­æ·»åŠ  console.logï¼š
```typescript
const RightPanel: React.FC<RightPanelProps> = ({ data, type, ... }) => {
  console.log('RightPanel data:', data, 'type:', type);
  return <div>...</div>;
};
```

### 3. æŸ¥çœ‹å®¢ç¾¤æ•°æ®
åœ¨ `useSegmentManagement.ts` ä¸­æ·»åŠ  console.logï¼š
```typescript
const handleSelectSegment = async (segment: SavedSegment) => {
  console.log('Selecting segment:', segment);
  // ...
};
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. "Rendered fewer hooks than expected" é”™è¯¯
**åŸå› **: Hook è°ƒç”¨é¡ºåºä¸ä¸€è‡´æˆ–æ¡ä»¶è°ƒç”¨ Hook
**è§£å†³**: ç¡®ä¿ Hook åœ¨ç»„ä»¶é¡¶å±‚æŒ‰ç›¸åŒé¡ºåºè°ƒç”¨

### 2. å®¢ç¾¤å¯¹æ¯”æ²¡æœ‰ååº”
**åŸå› **: `savedSegments` æœªæ­£ç¡®åˆå§‹åŒ–
**è§£å†³**: æ£€æŸ¥ `useSegmentManagement` ä¸­çš„ useEffect æ˜¯å¦æ­£ç¡®åŠ è½½å®¢ç¾¤æ•°æ®

### 3. ç‚¹å‡»å®¢ç¾¤æ²¡æœ‰ååº”
**åŸå› **: `handleSelectSegment` ç¼ºå°‘ `setMessages` å‚æ•°
**è§£å†³**: ç¡®ä¿ `useSegmentManagement` æ¥æ”¶åˆ°æ­£ç¡®çš„ `setMessages` å‡½æ•°

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [Lucide React å›¾æ ‡åº“](https://lucide.dev/)
- [Recharts å›¾è¡¨åº“](https://recharts.org/)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œå‘½åè§„èŒƒ
2. æ·»åŠ å¿…è¦çš„ç±»å‹æ³¨è§£
3. ä¿æŒç»„ä»¶çš„å•ä¸€èŒè´£åŸåˆ™
4. æ·»åŠ é€‚å½“çš„æ³¨é‡Šè¯´æ˜å¤æ‚é€»è¾‘
5. ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œåå†æäº¤

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚